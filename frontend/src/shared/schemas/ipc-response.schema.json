{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "entropic:ipc-response",
  "title": "Entropic IPC Response",
  "description": "ZMQ response from Python backend to Electron",
  "type": "object",
  "required": ["id"],
  "oneOf": [
    {
      "description": "Ping response (uses status instead of ok)",
      "properties": {
        "id": { "type": ["string", "null"] },
        "status": { "type": "string", "enum": ["alive", "busy"] },
        "uptime_s": { "type": "number", "minimum": 0 },
        "last_frame_ms": { "type": "number", "minimum": 0 }
      },
      "required": ["id", "status", "uptime_s", "last_frame_ms"],
      "additionalProperties": false
    },
    {
      "description": "Success response",
      "properties": {
        "id": { "type": ["string", "null"] },
        "ok": { "const": true }
      },
      "required": ["id", "ok"],
      "additionalProperties": true
    },
    {
      "description": "Error response",
      "properties": {
        "id": { "type": ["string", "null"] },
        "ok": { "const": false },
        "error": { "type": "string" }
      },
      "required": ["id", "ok", "error"],
      "additionalProperties": false
    }
  ]
}
